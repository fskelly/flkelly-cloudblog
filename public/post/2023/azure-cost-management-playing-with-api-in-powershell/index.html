

<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/WebPage">
  <head>
    

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

 


      <title>Can I run this cheaper? Use case for the Azure Cost Management API - </title>

  <meta name="description" content="What are we doing?
I was given inspiration by a colleague, Ben Hummerstone who used a Azure Python Function, whilst super cool and interesting, I am a PowerShell advocate through and through. So I used PowerShell and wrote a script to show some of the use cases. This is just the tip of the iceberg and the script has been built to show some of the options available.
Constraints / limitations

The primary focus of this script is IaaS.
Could be better implemented as a function. If there is enough of an ask, I might build this into a function.
Built for my sample use cases.
This is a quick and dirty implementation.
This is NOT PRODUCTION ready yet.

Lets build this
Steps
You will need the following">
  <meta name="author" content="Fletcher Kelly"/><script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "WebSite",
    "name": "Fletcher\u0027s Cloud Blog",
    
    "url": "https:\/\/username.github.io\/"
}
</script><script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Organization",
  "name": "",
  "url": "https:\/\/username.github.io\/"
  
  
  
  
}
</script>
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [{
        "@type": "ListItem",
        "position": 1,
        "item": {
          "@id": "https:\/\/username.github.io\/",
          "name": "home"
        }
    },{
        "@type": "ListItem",
        "position": 3,
        "item": {
          "@id": "https:\/\/username.github.io\/post\/2023\/azure-cost-management-playing-with-api-in-powershell\/",
          "name": "Can i run this cheaper? use case for the azure cost management API"
        }
    }]
}
</script><script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Article",
  "author": {
    "name" : "Fletcher Kelly"
  },
  "headline": "Can I run this cheaper? Use case for the Azure Cost Management API",
  "description" : "What are we doing? I was given inspiration by a colleague, Ben Hummerstone who used a Azure Python Function, whilst super cool and interesting, I am a PowerShell advocate through and through. So I used PowerShell and wrote a script to show some of the use cases. This is just the tip of the iceberg and the script has been built to show some of the options available.\nConstraints \/ limitations The primary focus of this script is IaaS. Could be better implemented as a function. If there is enough of an ask, I might build this into a function. Built for my sample use cases. This is a quick and dirty implementation. This is NOT PRODUCTION ready yet. Lets build this Steps You will need the following\n",
  "inLanguage" : "en",
  "wordCount":  1131 ,
  "datePublished" : "2023-08-03T15:24:21\u002b01:00",
  "dateModified" : "2023-08-03T15:24:21\u002b01:00",
  "image" : "https:\/\/username.github.io\/",
  "keywords" : [ "Azure, Cost Management" ],
  "mainEntityOfPage" : "https:\/\/username.github.io\/post\/2023\/azure-cost-management-playing-with-api-in-powershell\/",
  "publisher" : {
    "@type": "Organization",
    "name" : "https:\/\/username.github.io\/",
    "logo" : {
        "@type" : "ImageObject",
        "url" : "https:\/\/username.github.io\/",
        "height" :  60 ,
        "width" :  60
    }
  }
}
</script>


<meta property="og:title" content="Can I run this cheaper? Use case for the Azure Cost Management API" />
<meta property="og:description" content="What are we doing?
I was given inspiration by a colleague, Ben Hummerstone who used a Azure Python Function, whilst super cool and interesting, I am a PowerShell advocate through and through. So I used PowerShell and wrote a script to show some of the use cases. This is just the tip of the iceberg and the script has been built to show some of the options available.
Constraints / limitations

The primary focus of this script is IaaS.
Could be better implemented as a function. If there is enough of an ask, I might build this into a function.
Built for my sample use cases.
This is a quick and dirty implementation.
This is NOT PRODUCTION ready yet.

Lets build this
Steps
You will need the following">
<meta property="og:url" content="https://username.github.io/post/2023/azure-cost-management-playing-with-api-in-powershell/" />
<meta property="og:type" content="website" />
<meta property="og:site_name" content="Fletcher&#39;s Cloud Blog" />

  <meta name="twitter:title" content="Can I run this cheaper? Use case for the Azure Cost Management API" />
  <meta name="twitter:description" content="What are we doing?
I was given inspiration by a colleague, Ben Hummerstone who used a Azure Python Function, whilst super cool and interesting, I am a PowerShell advocate through and through. So I â€¦">
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="generator" content="Hugo 0.139.2">
  <link rel="alternate" href="https://username.github.io/index.xml" type="application/rss+xml" title="Fletcher&#39;s Cloud Blog"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/katex.min.css" integrity="sha384-3UiQGuEI4TTMaFmGIZumfRPtfKQ3trwQE2JgosJxCnGmQpL/lJdjpcHkaaFwHlcI" crossorigin="anonymous">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.6.0/css/all.css" integrity="sha384-h/hnnw1Bi4nbpD6kE7nYfCXzovi622sY5WBxww8ARKwpdLj5kUWjRuyiXaD1U2JT" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/css/bootstrap.min.css" integrity="sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu" crossorigin="anonymous"><link rel="stylesheet" href="https://username.github.io/css/main.css" /><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" />
  <link rel="stylesheet" href="https://username.github.io/css/highlight.min.css" /><link rel="stylesheet" href="https://username.github.io/css/codeblock.css" /><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.css" integrity="sha384-h/L2W9KefUClHWaty3SLE5F/qvc4djlyR4qY3NUV5HGQBBW7stbcfff1+I/vmsHh" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/default-skin/default-skin.min.css" integrity="sha384-iD0dNku6PYSIQLyfTOpB06F2KCZJAKLOThS5HRe8b3ibhdEQ6eKsFf/EeFxdOt5R" crossorigin="anonymous">

  </head>
  <body>
    <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="https://username.github.io/">Fletcher&#39;s Cloud Blog</a>
    </div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
        
          
            <li>
              <a title="Blog" href="/">Blog</a>
            </li>
          
        
          
            <li>
              <a title="Tags" href="/tags">Tags</a>
            </li>
          
        
          
            <li>
              <a title="About Blog" href="/page/about/">About Blog</a>
            </li>
          
        
          
            <li>
              <a title="About Fletcher Kelly" href="/page/fletcherkelly/">About Fletcher Kelly</a>
            </li>
          
        
          
            <li>
              <a title="About Robin Heringa" href="/page/robinheringa/">About Robin Heringa</a>
            </li>
          
        

        

        
      </ul>
    </div>

    

  </div>
</nav>




    


<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>


  
  
  






  

  <header class="header-section ">
    
    
    <div class="intro-header no-img">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
            <div class="post-heading">
              
                <h1>Can I run this cheaper? Use case for the Azure Cost Management API</h1>
              
              
              
              
                <span class="post-meta">
  
  
  <i class="fas fa-calendar"></i>&nbsp;Posted on August 3, 2023
  
  
    &nbsp;|&nbsp;<i class="fas fa-clock"></i>&nbsp;6&nbsp;minutes
  
  
    &nbsp;|&nbsp;<i class="fas fa-book"></i>&nbsp;1131&nbsp;words
  
  
    
      &nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;Fletcher Kelly
    
  
  
</span>


              
            </div>
          </div>
        </div>
      </div>
    </div>
  
  </header>


    
<div class="container" role="main">
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
      <article role="main" class="blog-post">
        <h2 id="what-are-we-doing">What are we doing?</h2>
<p>I was given inspiration by a colleague, <a href="https://www.linkedin.com/in/bhummerstone/">Ben Hummerstone</a> who used a <a href="https://learn.microsoft.com/en-us/azure/azure-functions/functions-reference-python?tabs=asgi%2Capplication-level&amp;pivots=python-mode-configuration">Azure Python Function</a>, whilst super cool and interesting, I am a PowerShell advocate through and through. So I used PowerShell and wrote a script to show some of the use cases. This is just the tip of the iceberg and the script has been built to show some of the options available.</p>
<h2 id="constraints--limitations">Constraints / limitations</h2>
<ol>
<li>The primary focus of this script is IaaS.</li>
<li>Could be better implemented as a function. If there is enough of an ask, I might build this into a function.</li>
<li>Built for my sample use cases.</li>
<li>This is a quick and dirty implementation.</li>
<li>This is <strong>NOT PRODUCTION</strong> ready yet.</li>
</ol>
<h2 id="lets-build-this">Lets build this</h2>
<h3 id="steps">Steps</h3>
<p>You will need the following</p>
<ol>
<li>PowerShell</li>
<li>An understanding of the Cost API (Insert link here)</li>
<li>Willingness to learn and experiment</li>
<li>Postman or the Postman VS Code extension is great for testing, however a normal browser will also return the required details.</li>
</ol>
<p>In essence, there are snippets of code built into one bigger script.</p>
<ol>
<li>Login and list all subscriptions you have access to then pick one to get the vms against.</li>
<li>Check for vms with the same in different resource groups.</li>
<li>We perform an overall call for data.</li>
<li>Check for pagination - as the results are returned 100 rows at a time.</li>
<li>We filter the data - we remove Spot and Low Priority Items.</li>
<li>We find cheaper options with the above filter applied.</li>
<li>We can check against specific regions, again with the filter from step2 applied. Was interesting to get the formatting correct here. :)</li>
</ol>
<p>I will do my best to explain the script, I have also added comments. Please use this as a base and modify as needed. This scripts only <strong>GETS</strong> information, there are <strong>NO WRITES/SETS</strong> in this script. This is by design, please add this functionality yourself.</p>
<p>The snippet below, is designed to allow you to log into Azure (Azure Commercial by default) and then list all the subscriptions you have access to and present a list and then connect to the selected subscription.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="kd">function</span><span class="w"> </span><span class="nb">Select-SubscriptionsAndConnectTo</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nb">Login-AzAccount</span>
</span></span><span class="line"><span class="cl">    <span class="nv">$subscriptions</span> <span class="p">=</span> <span class="nb">Get-AzSubscription</span> <span class="p">|</span> <span class="nb">Select-Object</span> <span class="n">Name</span><span class="p">,</span><span class="n">SubscriptionId</span> <span class="p">|</span> <span class="nb">Sort-Object</span> <span class="n">Name</span> 
</span></span><span class="line"><span class="cl">    <span class="p">[</span><span class="no">int</span><span class="p">]</span><span class="nv">$subscriptionCount</span> <span class="p">=</span> <span class="nv">$subscriptions</span><span class="p">.</span><span class="py">count</span>
</span></span><span class="line"><span class="cl">    <span class="nb">Write-output</span> <span class="s2">&#34;Found&#34;</span> <span class="nv">$subscriptionCount</span> <span class="s2">&#34;Subscriptions&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="nv">$i</span> <span class="p">=</span> <span class="mf">0</span>
</span></span><span class="line"><span class="cl">    <span class="k">foreach</span> <span class="p">(</span><span class="nv">$subscription</span> <span class="k">in</span> <span class="nv">$subscriptions</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$subValue</span> <span class="p">=</span> <span class="nv">$i</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$subText</span> <span class="p">=</span> <span class="p">[</span><span class="no">string</span><span class="p">]</span><span class="nv">$subValue</span> <span class="p">+</span> <span class="s2">&#34; : &#34;</span> <span class="p">+</span> <span class="nv">$subscription</span><span class="p">.</span><span class="py">Name</span> <span class="p">+</span> <span class="s2">&#34; ( &#34;</span> <span class="p">+</span> <span class="nv">$subscription</span><span class="p">.</span><span class="py">SubscriptionId</span> <span class="p">+</span> <span class="s2">&#34; ) &#34;</span>
</span></span><span class="line"><span class="cl">        <span class="nb">Write-output</span> <span class="nv">$subText</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$i</span><span class="p">++</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">Do</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="p">[</span><span class="no">int</span><span class="p">]</span><span class="nv">$subscriptionChoice</span> <span class="p">=</span> <span class="nb">read-host</span> <span class="n">-prompt</span> <span class="s2">&#34;Select number &amp; press enter&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span> 
</span></span><span class="line"><span class="cl">    <span class="k">until</span> <span class="p">(</span><span class="nv">$subscriptionChoice</span> <span class="o">-le</span> <span class="nv">$subscriptionCount</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nv">$selectedSub</span> <span class="p">=</span> <span class="s2">&#34;You selected &#34;</span> <span class="p">+</span> <span class="nv">$subscriptions</span><span class="p">[</span><span class="nv">$subscriptionChoice</span><span class="p">].</span><span class="py">Name</span>
</span></span><span class="line"><span class="cl">    <span class="nb">Write-output</span> <span class="nv">$selectedSub</span>
</span></span><span class="line"><span class="cl">    <span class="nb">Set-AzContext</span> <span class="n">-SubscriptionId</span> <span class="nv">$subscriptions</span><span class="p">[</span><span class="nv">$subscriptionChoice</span><span class="p">].</span><span class="py">SubscriptionId</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nb">Select-SubscriptionsAndConnectTo</span>
</span></span></code></pre></div><p>Get VMs and check if the same VM name is used in multiple resource groups.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="c">## getting all vms in a subscription</span>
</span></span><span class="line"><span class="cl"><span class="nv">$vms</span> <span class="p">=</span> <span class="nb">Get-AzVM</span>
</span></span><span class="line"><span class="cl"><span class="nv">$vms</span> <span class="p">|</span> <span class="nb">Select-Object</span> <span class="n">Name</span><span class="p">,</span><span class="n">ResourceGroupName</span><span class="p">,</span><span class="n">Location</span><span class="p">,</span><span class="vm">@</span><span class="p">{</span><span class="n">l</span><span class="p">=</span><span class="s1">&#39;VMSize&#39;</span><span class="p">;</span><span class="n">e</span><span class="p">={</span><span class="nv">$_</span><span class="p">.</span><span class="py">HardwareProfile</span><span class="p">.</span><span class="n">VmSize</span><span class="p">}}|</span> <span class="nb">Sort-Object</span> <span class="n">Name</span> <span class="p">|</span> <span class="nb">Format-Table</span> <span class="n">-AutoSize</span>
</span></span><span class="line"><span class="cl"><span class="c">## reading in virtual machines</span>
</span></span><span class="line"><span class="cl"><span class="nv">$selectedVmName</span> <span class="p">=</span> <span class="nb">read-host</span> <span class="s2">&#34;Which VM would you like to check for better pricing?&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nv">$selectedRGName</span> <span class="p">=</span> <span class="nv">$vms</span> <span class="p">|</span> <span class="nb">Where-Object</span> <span class="p">{</span> <span class="nv">$_</span><span class="p">.</span><span class="py">Name</span> <span class="o">-eq</span> <span class="nv">$selectedVmName</span> <span class="p">}</span> <span class="p">|</span> <span class="nb">Select-Object</span> <span class="n">ResourceGroupName</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c">## checking for duplicate names in multiple resource groups</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="p">(</span><span class="nv">$selectedRGName</span><span class="p">.</span><span class="py">count</span> <span class="o">-gt</span> <span class="mf">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nv">$rgCount</span> <span class="p">=</span> <span class="nv">$selectedRGName</span><span class="p">.</span><span class="py">count</span>
</span></span><span class="line"><span class="cl">    <span class="nb">Write-Output</span> <span class="s2">&#34;Found multiple VMs with the same name in different resource groups&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="nv">$rgNames</span> <span class="p">=</span> <span class="nv">$selectedRGName</span> <span class="p">|</span> <span class="nb">Select-Object</span> <span class="n">ResourceGroupName</span>
</span></span><span class="line"><span class="cl">    <span class="c">#write-output $rgNames.resourcegroupname</span>
</span></span><span class="line"><span class="cl">    <span class="nv">$i</span> <span class="p">=</span> <span class="mf">0</span>
</span></span><span class="line"><span class="cl">    <span class="k">foreach</span> <span class="p">(</span><span class="nv">$rgName</span> <span class="k">in</span> <span class="nv">$rgNames</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$rgValue</span> <span class="p">=</span> <span class="nv">$i</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$rgText</span> <span class="p">=</span> <span class="p">[</span><span class="no">string</span><span class="p">]</span><span class="nv">$rgValue</span> <span class="p">+</span> <span class="s2">&#34; : &#34;</span> <span class="p">+</span> <span class="nv">$rgName</span><span class="p">.</span><span class="py">ResourceGroupName</span>
</span></span><span class="line"><span class="cl">        <span class="nb">Write-output</span> <span class="nv">$rgText</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$i</span><span class="p">++</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">Do</span> 
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="p">[</span><span class="no">int</span><span class="p">]</span><span class="nv">$rgChoice</span> <span class="p">=</span> <span class="nb">read-host</span> <span class="n">-prompt</span> <span class="s2">&#34;Select number &amp; press enter&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span> 
</span></span><span class="line"><span class="cl">    <span class="k">until</span> <span class="p">(</span><span class="nv">$rgChoice</span> <span class="o">-le</span> <span class="nv">$rgCount</span><span class="p">-</span><span class="mf">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nv">$selectedRGText</span> <span class="p">=</span> <span class="s2">&#34;You selected &#34;</span> <span class="p">+</span> <span class="nv">$selectedRGName</span><span class="p">[</span><span class="nv">$rgChoice</span><span class="p">].</span><span class="py">ResourceGroupName</span>
</span></span><span class="line"><span class="cl">    <span class="nb">Write-output</span> <span class="nv">$selectedRGText</span>
</span></span><span class="line"><span class="cl">    <span class="nv">$selectedRG</span> <span class="p">=</span> <span class="nv">$selectedRGName</span><span class="p">[</span><span class="nv">$rgChoice</span><span class="p">].</span><span class="py">ResourceGroupName</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c">## selecting the vm from the selected resource group</span>
</span></span><span class="line"><span class="cl">    <span class="nv">$azureVm</span> <span class="p">=</span> <span class="nb">get-azvm</span> <span class="n">-ResourceGroupName</span> <span class="nv">$selectedRG</span> <span class="n">-Name</span> <span class="nv">$selectedVmName</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c">## selecting the vm from the selected resource group</span>
</span></span><span class="line"><span class="cl">    <span class="nv">$azureVm</span> <span class="p">=</span> <span class="nb">get-azvm</span> <span class="n">-ResourceGroupName</span> <span class="nv">$selectedRGName</span><span class="p">.</span><span class="py">ResourceGroupName</span> <span class="n">-Name</span> <span class="nv">$selectedVmName</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>Getting information about the selected VM and establishing the current base price.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl"><span class="c">## building variables for api call</span>
</span></span><span class="line"><span class="cl"><span class="nv">$azureVMSKU</span> <span class="p">=</span> <span class="nv">$azureVm</span><span class="p">.</span><span class="py">HardwareProfile</span><span class="p">.</span><span class="py">VmSize</span>
</span></span><span class="line"><span class="cl"><span class="nv">$azureVmLocation</span> <span class="p">=</span> <span class="nv">$azureVm</span><span class="p">.</span><span class="py">Location</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c">## api variables</span>
</span></span><span class="line"><span class="cl"><span class="nv">$apiUrl</span> <span class="p">=</span> <span class="s2">&#34;https://prices.azure.com/api/retail/prices?&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nv">$armSkuName</span> <span class="p">=</span> <span class="nv">$azureVMSKU</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c">## get base information around pricing</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nv">$baseFilter</span> <span class="p">=</span> <span class="s2">&#34;armSkuName eq &#39;</span><span class="nv">$armSkuName</span><span class="s2">&#39; and priceType eq &#39;Consumption&#39; and armRegionName eq &#39;</span><span class="nv">$azureVmLocation</span><span class="s2">&#39;&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nv">$baseUrl</span> <span class="p">=</span> <span class="nv">$apiUrl</span> <span class="p">+</span> <span class="s2">&#34;</span><span class="se">`$</span><span class="s2">filter=</span><span class="nv">$baseFilter</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">Write-Output</span> <span class="s2">&#34;Current Url is </span><span class="nv">$baseUrl</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nv">$baseJsonData</span> <span class="p">=</span> <span class="nb">Invoke-RestMethod</span> <span class="n">-Uri</span> <span class="nv">$baseUrl</span> <span class="n">-Method</span> <span class="n">Get</span>
</span></span><span class="line"><span class="cl"><span class="c">## selecting most expensive price</span>
</span></span><span class="line"><span class="cl"><span class="nv">$baseVMPrice</span> <span class="p">=</span> <span class="p">(</span><span class="nv">$baseJsonData</span><span class="p">.</span><span class="py">Items</span>  <span class="p">|</span> <span class="nb">Where-Object</span> <span class="p">{</span> <span class="nv">$_</span><span class="p">.</span><span class="py">skuName</span> <span class="o">-notlike</span> <span class="s2">&#34;*Spot*&#34;</span> <span class="o">-and</span> <span class="nv">$_</span><span class="p">.</span><span class="py">skuName</span> <span class="o">-notlike</span> <span class="s2">&#34;*Low Priority*&#34;</span> <span class="p">}</span> <span class="p">|</span> <span class="nb">Sort-Object</span> <span class="n">unitPrice</span> <span class="n">-Descending</span> <span class="p">|</span> <span class="nb">Select-Object</span> <span class="n">-Last</span> <span class="mf">1</span><span class="p">).</span><span class="py">unitPrice</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c">## formatting for results</span>
</span></span><span class="line"><span class="cl"><span class="nv">$baseVMPrice</span> <span class="p">=</span> <span class="s2">&#34;{0:N4}&#34;</span> <span class="o">-f</span> <span class="nv">$baseVMPrice</span>
</span></span><span class="line"><span class="cl"><span class="nb">Write-Output</span> <span class="s2">&#34;Base price is </span><span class="nv">$baseVMPrice</span><span class="s2">&#34;</span>
</span></span></code></pre></div><p>Build an array to store the information for later manipulation and sorting. Filter out &ldquo;Low Priority&rdquo; and &ldquo;Spot VMs&rdquo; and deal with pagination.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c">## get all pricing data for the selected vm</span>
</span></span><span class="line"><span class="cl"><span class="nv">$filter</span> <span class="p">=</span> <span class="s2">&#34;armSkuName eq &#39;</span><span class="nv">$armSkuName</span><span class="s2">&#39; and priceType eq &#39;Consumption&#39;&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nv">$allItems</span> <span class="p">=</span> <span class="vm">@</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c"># Run Query</span>
</span></span><span class="line"><span class="cl"><span class="nv">$url</span> <span class="p">=</span> <span class="nv">$apiUrl</span> <span class="p">+</span> <span class="s2">&#34;</span><span class="se">`$</span><span class="s2">filter=</span><span class="nv">$filter</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nb">Write-Output</span> <span class="s2">&#34;Current Url is </span><span class="nv">$url</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nv">$currentJsonData</span> <span class="p">=</span> <span class="nb">Invoke-RestMethod</span> <span class="n">-Uri</span> <span class="nv">$url</span> <span class="n">-Method</span> <span class="n">Get</span>
</span></span><span class="line"><span class="cl"><span class="nv">$allItems</span> <span class="p">+=</span> <span class="nv">$currentJsonData</span><span class="p">.</span><span class="py">Items</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c"># pagination</span>
</span></span><span class="line"><span class="cl"><span class="nv">$NextPage</span> <span class="p">=</span> <span class="nv">$currentJsonData</span><span class="p">.</span><span class="py">NextPageLink</span>
</span></span><span class="line"><span class="cl"><span class="k">while</span> <span class="p">(</span><span class="nv">$NextPage</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nb">Write-Verbose</span> <span class="s2">&#34;Current Url is </span><span class="nv">$NextPage</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="nv">$currentJsonData</span> <span class="p">=</span> <span class="nb">Invoke-RestMethod</span> <span class="n">-Uri</span> <span class="nv">$NextPage</span> <span class="n">-Method</span> <span class="n">Get</span>
</span></span><span class="line"><span class="cl">    <span class="nv">$allItems</span> <span class="p">+=</span> <span class="nv">$currentJsonData</span><span class="p">.</span><span class="py">Items</span>
</span></span><span class="line"><span class="cl">    <span class="nv">$NextPage</span> <span class="p">=</span> <span class="nv">$currentJsonData</span><span class="p">.</span><span class="py">NextPageLink</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c"># filter out spot and low priority item from array</span>
</span></span><span class="line"><span class="cl"><span class="nv">$filteredItems</span> <span class="p">=</span> <span class="nv">$allItems</span> <span class="p">|</span> <span class="nb">Select-Object</span> <span class="n">skuName</span><span class="p">,</span> <span class="n">meterName</span><span class="p">,</span> <span class="n">unitOfMeasure</span><span class="p">,</span> <span class="vm">@</span><span class="p">{</span><span class="n">l</span><span class="p">=</span><span class="s1">&#39;unitPrice&#39;</span><span class="p">;</span><span class="n">e</span><span class="p">={</span><span class="s2">&#34;{0:N4}&#34;</span> <span class="o">-f</span> <span class="nv">$_</span><span class="p">.</span><span class="n">unitPrice</span><span class="p">}},</span> <span class="n">armRegionName</span> <span class="p">|</span> <span class="nb">Where-Object</span> <span class="p">{</span> <span class="nv">$_</span><span class="p">.</span><span class="py">skuName</span> <span class="o">-notlike</span> <span class="s2">&#34;*Spot*&#34;</span> <span class="o">-and</span> <span class="nv">$_</span><span class="p">.</span><span class="py">skuName</span> <span class="o">-notlike</span> <span class="s2">&#34;*Low Priority*&#34;</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nb">Write-Output</span> <span class="s2">&#34;Total items: </span><span class="p">$(</span><span class="nv">$filteredItems</span><span class="p">.</span><span class="n">Count</span><span class="p">)</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="c">#$filteredItems</span>
</span></span><span class="line"><span class="cl"><span class="nv">$filteredItems</span> <span class="p">|</span> <span class="nb">Sort-Object</span> <span class="n">-Property</span> <span class="n">unitPrice</span> <span class="p">|</span> <span class="nb">Format-Table</span> <span class="n">-AutoSize</span>
</span></span><span class="line"><span class="cl"><span class="nv">$cheaperOptions</span> <span class="p">=</span> <span class="nv">$filteredItems</span> <span class="p">|</span> <span class="nb">Where-Object</span> <span class="n">-Property</span> <span class="n">unitPrice</span> <span class="o">-lt</span> <span class="nv">$baseVMPrice</span> <span class="p">|</span> <span class="nb">Sort-Object</span> <span class="n">-Property</span> <span class="n">unitPrice</span>
</span></span><span class="line"><span class="cl"><span class="nb">Write-Output</span> <span class="s2">&#34;Cheaper than </span><span class="nv">$baseVMPrice</span><span class="s2"> options: </span><span class="p">$(</span><span class="nv">$cheaperOptions</span><span class="p">.</span><span class="n">Count</span><span class="p">)</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="nv">$cheaperOptions</span> <span class="p">|</span> <span class="nb">Format-Table</span> <span class="n">-Property</span> <span class="n">skuName</span><span class="p">,</span> <span class="n">meterName</span><span class="p">,</span> <span class="n">unitOfMeasure</span><span class="p">,</span> <span class="vm">@</span><span class="p">{</span><span class="n">l</span><span class="p">=</span><span class="s1">&#39;unitPrice&#39;</span><span class="p">;</span><span class="n">e</span><span class="p">={</span><span class="s2">&#34;{0:N4}&#34;</span> <span class="o">-f</span> <span class="nv">$_</span><span class="p">.</span><span class="n">unitPrice</span><span class="p">}},</span> <span class="n">armRegionName</span> <span class="n">-AutoSize</span>
</span></span></code></pre></div><p>I have also included an option to check against specific regions if that is something you would like to do. You will get prompted if you want to check against other regions. A <strong>Y</strong> will continue to ask which regions, this is a comma seperated list, <em>swedencentral,westeurope</em> (as an example). A <strong>N</strong> will simply stop the script.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-powershell" data-lang="powershell"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c">## how to check against specific regions</span>
</span></span><span class="line"><span class="cl"><span class="nv">$regionCheck</span> <span class="p">=</span> <span class="nb">read-host</span> <span class="s2">&#34;Would you like to check against specific regions? (y/n)&#34;</span>
</span></span><span class="line"><span class="cl"><span class="k">while</span><span class="p">(</span><span class="s2">&#34;y&#34;</span><span class="p">,</span><span class="s2">&#34;n&#34;</span> <span class="o">-notcontains</span> <span class="nv">$regionCheck</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nv">$regionCheck</span> <span class="p">=</span> <span class="nb">read-host</span> <span class="s2">&#34;Would you like to check against specific regions? (y/n)&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="p">(</span><span class="nv">$regionCheck</span> <span class="o">-eq</span> <span class="s2">&#34;y&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nv">$specificRegions</span> <span class="p">=</span> <span class="nb">read-host</span> <span class="s2">&#34;please enter region names separated by comma&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="nv">$specificRegions</span> <span class="p">=</span> <span class="nv">$specificRegions</span><span class="p">.</span><span class="py">split</span><span class="p">(</span><span class="s2">&#34;,&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nv">$regionItems</span> <span class="p">=</span> <span class="vm">@</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="nv">$regionQueryBaseUrlFilter</span> <span class="p">=</span> <span class="s2">&#34;armSkuName eq &#39;</span><span class="nv">$armSkuName</span><span class="s2">&#39; and priceType eq &#39;Consumption&#39; &#34;</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="k">foreach</span> <span class="p">(</span><span class="nv">$item</span> <span class="k">in</span> <span class="nv">$specificRegions</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$item</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$regionQueryBaseUrlFilter</span> <span class="p">=</span> <span class="s2">&#34;armSkuName eq &#39;</span><span class="nv">$armSkuName</span><span class="s2">&#39; and priceType eq &#39;Consumption&#39; &#34;</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$regionQueryBaseUrlFilter</span> <span class="p">=</span> <span class="nv">$regionQueryBaseUrlFilter</span> <span class="p">+</span> <span class="s2">&#34;and armRegionName eq &#39;</span><span class="nv">$item</span><span class="s2">&#39; &#34;</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$regionQueryBaseUrlFilter</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$regionQueryUrl</span> <span class="p">=</span> <span class="nv">$apiUrl</span> <span class="p">+</span> <span class="s2">&#34;</span><span class="se">`$</span><span class="s2">filter=</span><span class="nv">$regionQueryBaseUrlFilter</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$otherRegionJsonData</span> <span class="p">=</span> <span class="nb">Invoke-RestMethod</span> <span class="n">-Uri</span> <span class="nv">$regionQueryUrl</span> <span class="n">-Method</span> <span class="n">Get</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$regionItems</span> <span class="p">+=</span> <span class="nv">$otherRegionJsonData</span><span class="p">.</span><span class="py">Items</span>
</span></span><span class="line"><span class="cl">        <span class="nv">$NextPage</span> <span class="p">=</span> <span class="nv">$otherRegionJsonData</span><span class="p">.</span><span class="py">NextPageLink</span>
</span></span><span class="line"><span class="cl">        <span class="k">while</span> <span class="p">(</span><span class="nv">$NextPage</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nb">Write-Output</span> <span class="s2">&#34;Current Url is </span><span class="nv">$NextPage</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="nv">$otherRegionJsonData</span> <span class="p">=</span> <span class="nb">Invoke-RestMethod</span> <span class="n">-Uri</span> <span class="nv">$NextPage</span> <span class="n">-Method</span> <span class="n">Get</span>
</span></span><span class="line"><span class="cl">            <span class="nv">$regionItems</span> <span class="p">+=</span> <span class="nv">$otherRegionJsonData</span><span class="p">.</span><span class="py">Items</span>
</span></span><span class="line"><span class="cl">            <span class="nv">$NextPage</span> <span class="p">=</span> <span class="nv">$otherRegionJsonData</span><span class="p">.</span><span class="py">NextPageLink</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="nb">Write-Output</span> <span class="s2">&#34;Output below&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="nv">$regionItems</span> <span class="p">|</span> <span class="nb">Where-Object</span> <span class="p">{</span> <span class="nv">$_</span><span class="p">.</span><span class="py">skuName</span> <span class="o">-notlike</span> <span class="s2">&#34;*Spot*&#34;</span> <span class="o">-and</span> <span class="nv">$_</span><span class="p">.</span><span class="py">skuName</span> <span class="o">-notlike</span> <span class="s2">&#34;*Low Priority*&#34;</span> <span class="p">}</span> <span class="p">|</span> <span class="nb">Format-Table</span> <span class="n">-Property</span> <span class="n">skuName</span><span class="p">,</span> <span class="n">meterName</span><span class="p">,</span> <span class="n">unitOfMeasure</span><span class="p">,</span> <span class="vm">@</span><span class="p">{</span><span class="n">l</span><span class="p">=</span><span class="s1">&#39;unitPrice&#39;</span><span class="p">;</span><span class="n">e</span><span class="p">={</span><span class="s2">&#34;{0:N4}&#34;</span> <span class="o">-f</span> <span class="nv">$_</span><span class="p">.</span><span class="n">unitPrice</span><span class="p">}},</span> <span class="n">armRegionName</span> <span class="n">-AutoSize</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span></code></pre></div><p>Full script can be found <a href="https://github.com/fskelly/flkelly-AzureCode-powershell/blob/main/cost-management/get-vms-list-costings.ps1">here</a></p>


        
          <div class="blog-tags">
            
              
              <a href="https://username.github.io/tags/azure/">Azure</a>&nbsp;
            
              
              <a href="https://username.github.io/tags/cost-management/">Cost Management</a>&nbsp;
            
          </div>
        

        
            <hr/>
            <section id="social-share">
              <div class="list-inline footer-links">
                

<div class="share-box" aria-hidden="true">
    <ul class="share">
      
      <li>
        <a href="//twitter.com/share?url=https%3a%2f%2fusername.github.io%2fpost%2f2023%2fazure-cost-management-playing-with-api-in-powershell%2f&amp;text=Can%20I%20run%20this%20cheaper%3f%20Use%20case%20for%20the%20Azure%20Cost%20Management%20API&amp;via=" target="_blank" title="Share on Twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fusername.github.io%2fpost%2f2023%2fazure-cost-management-playing-with-api-in-powershell%2f" target="_blank" title="Share on Facebook">
          <i class="fab fa-facebook"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//reddit.com/submit?url=https%3a%2f%2fusername.github.io%2fpost%2f2023%2fazure-cost-management-playing-with-api-in-powershell%2f&amp;title=Can%20I%20run%20this%20cheaper%3f%20Use%20case%20for%20the%20Azure%20Cost%20Management%20API" target="_blank" title="Share on Reddit">
          <i class="fab fa-reddit"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//www.linkedin.com/shareArticle?url=https%3a%2f%2fusername.github.io%2fpost%2f2023%2fazure-cost-management-playing-with-api-in-powershell%2f&amp;title=Can%20I%20run%20this%20cheaper%3f%20Use%20case%20for%20the%20Azure%20Cost%20Management%20API" target="_blank" title="Share on LinkedIn">
          <i class="fab fa-linkedin"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//www.stumbleupon.com/submit?url=https%3a%2f%2fusername.github.io%2fpost%2f2023%2fazure-cost-management-playing-with-api-in-powershell%2f&amp;title=Can%20I%20run%20this%20cheaper%3f%20Use%20case%20for%20the%20Azure%20Cost%20Management%20API" target="_blank" title="Share on StumbleUpon">
          <i class="fab fa-stumbleupon"></i>
        </a>
      </li>
  
      
      <li>
        <a href="//www.pinterest.com/pin/create/button/?url=https%3a%2f%2fusername.github.io%2fpost%2f2023%2fazure-cost-management-playing-with-api-in-powershell%2f&amp;description=Can%20I%20run%20this%20cheaper%3f%20Use%20case%20for%20the%20Azure%20Cost%20Management%20API" target="_blank" title="Share on Pinterest">
          <i class="fab fa-pinterest"></i>
        </a>
      </li>
    </ul>
  </div>
  

              </div>
            </section>
        

        
          

          
        
      </article>

      
        <ul class="pager blog-pager">
          
            <li class="previous">
              <a href="https://username.github.io/post/2023/avs-new-ldaps-run-command/" data-toggle="tooltip" data-placement="top" title="New LDAPS run-command for Azure VMware Solution">&larr; Previous Post</a>
            </li>
          
          
            <li class="next">
              <a href="https://username.github.io/post/2023/starting-wth-rest-calls-with-powershell/" data-toggle="tooltip" data-placement="top" title="Starting Wth API Rest Calls With Powershell">Next Post &rarr;</a>
            </li>
          
        </ul>
      


      
      
      
      
      
        
      

    </div>
  </div>
</div>

      <footer>
  <div class="container">
    
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links">
          
              <li>
		
		  <a href="https://github.com/fskelly" title="GitHub">
		
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-github fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
		
		  <a href="https://linkedin.com/in/fletcherkelly" title="LinkedIn">
		
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-linkedin fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
          
          
          
        </ul>
        <p class="credits copyright text-muted">
          
            
              Fletcher Kelly
            
          

          &nbsp;&bull;&nbsp;&copy;
          
            2024
          

          
            &nbsp;&bull;&nbsp;
            <a href="https://username.github.io/">Fletcher&#39;s Cloud Blog</a>
          
        </p>
        
        <p class="credits theme-by text-muted">
          <a href="https://gohugo.io">Hugo v0.139.2</a> powered &nbsp;&bull;&nbsp; Theme <a href="https://github.com/halogenica/beautifulhugo">Beautiful Hugo</a> adapted from <a href="https://deanattali.com/beautiful-jekyll/">Beautiful Jekyll</a>
          
        </p>
      </div>
    </div>
  </div>
</footer><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/katex.min.js" integrity="sha384-G0zcxDFp5LWZtDuRMnBkk3EphCK1lhEf4UEyEM693ka574TZGwo4IWwS6QLzM/2t" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.7/dist/contrib/auto-render.min.js" integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>
<script src="https://code.jquery.com/jquery-3.7.0.slim.min.js" integrity="sha384-w5y/xIeYixWvfM+A1cEbmHPURnvyqmVg5eVENruEdDjcyRLUSNej7512JQGspFUr" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/js/bootstrap.min.js" integrity="sha384-aJ21OjlMXNL5UyIl/XNwTMqvzeRMZH2w8c5cRVpzpU8Y5bApTppSuUkhZXN0VxHd" crossorigin="anonymous"></script>

<script src="https://username.github.io/js/main.js"></script>
<script src="https://username.github.io/js/highlight.min.js"></script>
<script> hljs.initHighlightingOnLoad(); </script>
<script> $(document).ready(function() {$("pre.chroma").css("padding","0");}); </script><script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.js" integrity="sha384-QELNnmcmU8IR9ZAykt67vGr9/rZJdHbiWi64V88fCPaOohUlHCqUD/unNN0BXSqy" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe-ui-default.min.js" integrity="sha384-m67o7SkQ1ALzKZIFh4CiTA8tmadaujiTa9Vu+nqPSwDOqHrDmxLezTdFln8077+q" crossorigin="anonymous"></script><script src="https://username.github.io/js/load-photoswipe.js"></script>










    
  </body>
</html>

